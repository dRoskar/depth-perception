<!DOCTYPE html>

<html>
	<head>
		<meta charset="UTF-8">
		<meta name="keywords" content="art, depth, perception, art with depth, moving, images, pixelart, depth perception, depthperception">
		<meta name="description" content="A collection of art that shows depth when moved over with a mouse">
		<meta name="author" content="Damjan Roškar">
		<title>Depth Perception - Art with depth... literally</title>
		<link href='http://fonts.googleapis.com/css?family=VT323' rel='stylesheet' type='text/css'>
		<style>
			body{ background-color:#000000; }
			h1{ color:#EFDFAF; text-align:center; font-family:"VT323",cursive; font-size:42px; }
			hr{ border-color:#DFBF5F; }
			table{ border-color:#EFDFAF; border-style:ridge;}
			.tableText { width:341px; text-align:center; color:#EFDFAF; font-family:"VT323",cursive; font-size:24px; }
			#personalUrl { color:#DFBF5F; color:#DFBF5F; border-bottom:2px solid #DFBF5F;  }
			#footer{ color:#EFDFAF; }
			#canvasDiv{ width:1394px; margin-left:auto; margin-right:auto; }
			#dataForm { color:#EFDFAF; font-family:"VT323",cursive; }
		</style>
	</head>

	<body>
		<a style="text-decoration:none" href="http://www.damjanroskar.com/depth-perception/" ><h1>Depth Perception - Test Tool</h1></a>
		
		<br>
			
		<div id="canvasDiv">
			<table border = "1">
				<tr>
					<td>
						<form id="dataForm" action="" method="get">
							Insert image URLs
							<br>
							<br>
							layer 1 
							<input type="text" id="txtBox1" value="" />
							<br>
							layer 2 
							<input type="text" id="txtBox2" value="" />
							<br>
							layer 3 
							<input type="text" id="txtBox3" value="" />
							<br>
							layer 4 
							<input type="text" id="txtBox4" value="" />
							<br>
							layer 5 
							<input type="text" id="txtBox5" value="" />
							<br>
							layer 6 
							<input type="text" id="txtBox6" value="" />
							<br>
							layer 7 
							<input type="text" id="txtBox7" value="" />
							<br>
							layer 8 
							<input type="text" id="txtBox8" value="" />
							<br>
							layer 9 
							<input type="text" id="txtBox9" value="" />
							<br>
							layer 10 
							<input type="text" id="txtBox10" value="" />
							<br>
							<br>
							Set bounding frame (optional)
							<br>
							<br>
							<select id="dropdown">
								<option value="0">None</option>
								<option value="1">Layer 1</option>
								<option value="2">Layer 2</option>
								<option value="3">Layer 3</option>
								<option value="4">Layer 4</option>
								<option value="5">Layer 5</option>
								<option value="6">Layer 6</option>
								<option value="7">Layer 7</option>
								<option value="8">Layer 8</option>
								<option value="9">Layer 9</option>
								<option value="10">Layer 10</option>
							</select>
							<br>
							<br>
							<br>
							<input type="button" id="btn" value="submit" onClick="submitForm(this.form)" />
						</form>
					</td>
					<td><canvas id="MyCanvas" width="1024" height="576" onmousemove="mouseOv(event)" ></canvas></td>
				</tr>
			</table>
		</div>
		
		<br />
		<br />
		<br />
		
		<script>
			var c = document.getElementById("MyCanvas");
			var ctx = c.getContext("2d");
			
			var page = 0;
			var pageFlipped = true;
			
			var imgAL = new Image();
			
			var img1 = new Image();
			var img2 = new Image();
			var img3 = new Image();
			var img4 = new Image();
			var img5 = new Image();
			var img6 = new Image();
			var img7 = new Image();
			var img8 = new Image();
			var img9 = new Image();
			var img10 = new Image();
			
			var layer1X;
			var layer1Y;
			
			var layer2X;
			var layer2Y;
			
			var layer3X;
			var layer3Y;
			
			var layer4X;
			var layer4Y;
			
			var layer5X;
			var layer5Y;
			
			var layer6X;
			var layer6Y;
			
			var layer7X;
			var layer7Y;
			
			var layer8X;
			var layer8Y;
			
			var layer9X;
			var layer9Y;
			
			var layer10X;
			var layer10Y;
			
			var frontImage;
			var offsetX;
			var offsetY;

			var touchedFirst = false;
			var touched = false;

			//data managment
			function dataSet(layer1, layer2, layer3, layer4, layer5, layer6, layer7, layer8, layer9, layer10, limit, frontImageIndex){
				this.layer1 = layer1;	//factor - ideal size - max move distance: 0.025	1050x591	12.8x7.2
				this.layer2 = layer2;	//factor - ideal size - max move distance: 0.05		1076x605	25.6x14.4
				this.layer3 = layer3;	//factor - ideal size - max move distance: 0.075	1101x620	38.4x21.6
				this.layer4 = layer4;	//factor - ideal size - max move distance: 0.1		1127x634	51.2x28.8
				this.layer5 = layer5;	//factor - ideal size - max move distance: 0.125	1152x648	64x36
				this.layer6 = layer6;	//factor - ideal size - max move distance: 0.15		1178x663	76.8x43.2
				this.layer7 = layer7;	//factor - ideal size - max move distance: 0.175	1204x677	89.6x50.4
				this.layer8 = layer8;	//factor - ideal size - max move distance: 0.2		1229x692	102.4x57.6
				this.layer9 = layer9;	//factor - ideal size - max move distance: 0.225	1255x706	115.2x64.8
				this.layer10 = layer10;	//factor - ideal size - max move distance: 0.25		1280x720	128x72
				this.limit = limit;
				this.frontImageIndex = frontImageIndex;
			}

			var theSet = new dataSet("http://i.imgur.com/yit3mIS.png", "http://i.imgur.com/zF82ywx.png", "images/empty.gif", "images/empty.gif", "images/empty.gif", "http://i.imgur.com/Gd3BCpb.png", "http://i.imgur.com/HTattVR.png", "http://i.imgur.com/SfGd7AL.png", "http://i.imgur.com/6lQ3rYE.png", "images/empty.gif", 0, 0);
			
			function submitForm(form){
			
				if(form.txtBox1.value == ""){
					theSet.layer1 = "images/empty.gif";
				}else{
					theSet.layer1 = txtBox1.value;
				}
				
				if(form.txtBox2.value == ""){
					theSet.layer2 = "images/empty.gif";
				}else{
					theSet.layer2 = txtBox2.value;
				}
				
				if(form.txtBox3.value == ""){
					theSet.layer3 = "images/empty.gif";
				}else{
					theSet.layer3 = txtBox3.value;
				}
				
				if(form.txtBox4.value == ""){
					theSet.layer4 = "images/empty.gif";
				}else{
					theSet.layer4 = txtBox4.value;
				}
				
				if(form.txtBox5.value == ""){
					theSet.layer5 = "images/empty.gif";
				}else{
					theSet.layer5 = txtBox5.value;
				}
				
				if(form.txtBox6.value == ""){
					theSet.layer6 = "images/empty.gif";
				}else{
					theSet.layer6 = txtBox6.value;
				}
				
				if(form.txtBox7.value == ""){
					theSet.layer7 = "images/empty.gif";
				}else{
					theSet.layer7 = txtBox7.value;
				}
				
				if(form.txtBox8.value == ""){
					theSet.layer8 = "images/empty.gif";
				}else{
					theSet.layer8 = txtBox8.value;
				}
				
				if(form.txtBox9.value == ""){
					theSet.layer9 = "images/empty.gif";
				}else{
					theSet.layer9 = txtBox9.value;
				}
				
				if(form.txtBox10.value == ""){
					theSet.layer10 = "images/empty.gif";
				}else{
					theSet.layer10 = txtBox10.value;
				}
				
				if(form.dropdown.value == 0){
					theSet.limit = 0;
					theSet.frontImageIndex = form.dropdown.value;
				}
				else{
					theSet.limit = 1;
					theSet.frontImageIndex = form.dropdown.value;
				}
				
				init();
			}
			// -----------------------------------------------Page Turned---------------------------------------------------------------------------------
			
			init();

			function init(){
				touched = false;
			
				//clear canvas
				ctx.clearRect(0, 0, c.width, c.height);
				
				//get data
				getData();
			}
			
			//mouseover
			function mouseOv(e){
				touchedFirst = true;
				touched = true;
				
				//get mouse position relative to canvas
				var position = getPosition(c);
				var mouseX = e.clientX - position.x;
				var mouseY = e.clientY - position.y;
				
				//convert to central coord sys
				mouseX -= 512;
				mouseY -= 288;
				
				layer1X = (-mouseX * 0.025) + 512;
				layer1Y = (-mouseY * 0.025) + 288;
				
				layer2X = (-mouseX * 0.05) + 512;
				layer2Y = (-mouseY * 0.05) + 288;
				
				layer3X = (-mouseX * 0.075) + 512;
				layer3Y = (-mouseY * 0.075) + 288;
				
				layer4X = (-mouseX * 0.1) + 512;
				layer4Y = (-mouseY * 0.1) + 288;
				
				layer5X = (-mouseX * 0.125) + 512;
				layer5Y = (-mouseY * 0.125) + 288;
				
				layer6X = (-mouseX * 0.15) + 512;
				layer6Y = (-mouseY * 0.15) + 288;
				
				layer7X = (-mouseX * 0.175) + 512;
				layer7Y = (-mouseY * 0.175) + 288;
				
				layer8X = (-mouseX * 0.2) + 512;
				layer8Y = (-mouseY * 0.2) + 288;
				
				layer9X = (-mouseX * 0.225) + 512;
				layer9Y = (-mouseY * 0.225) + 288;
				
				layer10X = (-mouseX * 0.25) + 512;
				layer10Y = (-mouseY * 0.25) + 288;
			}
			
			//draw image function, drawing from center
			function drawImageC(image, Xcoord, Ycoord){
				ctx.drawImage(image, Xcoord - (image.width/2), Ycoord - (image.height/2));
			}

			//get canvas position
			function getPosition(element) {
				var xPosition = 0;
				var yPosition = 0;
			  
				while(element) {
					xPosition += (element.offsetLeft - element.scrollLeft + element.clientLeft);
					yPosition += (element.offsetTop - element.scrollTop + element.clientTop);
					element = element.offsetParent;
				}
				return { x: xPosition, y: yPosition };
			}
			
			//get data for page
			function getData(){
			
				img1.src = theSet.layer1;
				img2.src = theSet.layer2;
				img3.src = theSet.layer3;
				img4.src = theSet.layer4;
				img5.src = theSet.layer5;
				img6.src = theSet.layer6;
				img7.src = theSet.layer7;
				img8.src = theSet.layer8;
				img9.src = theSet.layer9;
				img10.src = theSet.layer10;
				
				//does the data require limiting rectangles?
				if(theSet.limit == 1){
					
					//get the front image and the offset
					switch(theSet.frontImageIndex){
						
						case 2:
							frontImage = img2;
							offsetX = 25.6;
							offsetY = 14.4;
							break;
							
						case 3:
							frontImage = img3;
							offsetX = 38.4;
							offsetY = 21.6;
							break;
							
						case 4:
							frontImage = img4;
							offsetX = 51.2;
							offsetY = 28.8;
							break;
							
						case 5:
							frontImage = img5;
							offsetX = 64;
							offsetY = 36;
							break;
							
						case 6:
							frontImage = img6;
							offsetX = 12.8;
							offsetY = 7.2;
							break;
							
						case 7:
							frontImage = img7;
							offsetX = 89.6;
							offsetY = 50.4;
							break;
							
						case 8:
							frontImage = img8;
							offsetX = 102.4;
							offsetY = 57.6;
							break;
							
						case 9:
							frontImage = img9;
							offsetX = 115.2;
							offsetY = 64.8;
							break;
							
						case 10:
							frontImage = img10;
							offsetX = 128;
							offsetY = 72;
							break;
							
						default:
							frontImage = img10;
							offsetX = 128;
							offsetY = 72;
					}
				}
			}
			

			
			//loop
			setInterval((function (co) {
				return function () {
				
					//clear canvas
					ctx.clearRect(0, 0, c.width, c.height);
					
					if(touched == false){
						//images init
						drawImageC(img1, 512, 288);
						drawImageC(img2, 512, 288);
						drawImageC(img3, 512, 288);
						drawImageC(img4, 512, 288);
						drawImageC(img5, 512, 288);
						drawImageC(img6, 512, 288);
						drawImageC(img7, 512, 288);
						drawImageC(img8, 512, 288);
						drawImageC(img9, 512, 288);
						drawImageC(img10, 512, 288);
					}
					
					if(touchedFirst == false){
						//display instruction
						//rectangle base
						ctx.fillStyle = "#000000";
						ctx.fillRect(387, 195, 250, 40);
						
						//text
						ctx.textAlign = "center";
						ctx.fillStyle = "#EFDFAF";
						ctx.font = "24px Times New Roman";
						ctx.fillText("your mouse goes here", 512, 220);
					}
					
					//draw images relative to mouse position and translation factor
					drawImageC(img1, layer1X, layer1Y);
					drawImageC(img2, layer2X, layer2Y);
					drawImageC(img3, layer3X, layer3Y);
					drawImageC(img4, layer4X, layer4Y);
					drawImageC(img5, layer5X, layer5Y);
					drawImageC(img6, layer6X, layer6Y);
					drawImageC(img7, layer7X, layer7Y);
					drawImageC(img8, layer8X, layer8Y);
					drawImageC(img9, layer9X, layer9Y);
					drawImageC(img10, layer10X, layer10Y);
					
					
					//draw limiting rectangles for last layer (if the layer is too small)
					if(theSet.limit == 1){
						ctx.fillStyle="#000000";
						
						//left
						ctx.fillRect(0, 0, ((1024-frontImage.width)/2) + offsetX, 576);
						
						//right
						ctx.fillRect(1024, 0, -((1024-frontImage.width)/2) - offsetX, 576);
						
						//top
						ctx.fillRect(0, 0, 1024, ((576-frontImage.height)/2) + offsetY);
						
						//bottom
						ctx.fillRect(0, 576, 1024, -((576-frontImage.height)/2) - offsetY);
					}
				};
			})(ctx), 10);
		</script>
	</body>
</html>